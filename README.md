# 文件功能实现
## 实现功能：
- 服务器监听指定的本地端口，客户端连接指定的云端IP和云端端口的服务器
- 客户端可以控制云端目录有条件的前进和后退，条件有：必须是文件夹、不能后退到默认路径以上等
- 服务器显示在线用户的IP地址
- 实现某些特殊情况时弹出错误提示框的功能，例：未选中某文件，却点击下载时

## 关键思路：
**文件目录格式：** 目录中使用\来分割文件夹，由于C语言实现中需要转义字符，'\\\\'才代表\字符；同一路径下的不同文件（夹）使用|来分割。例：在"F:\\\\项目工程\\\\网络编程\\\\项目3-文件功能\\\\m_filepath"的路径中，文件列表为"123.txt|F:\\\\项目工程\\\\网络编程\\\\项目3-文件功能\\\\m_filepath\\\\child|新建位图图像.bmp|"

**交互格式：** 客户端向服务器发送路径，服务器向客户端发送文件列表。服务器将路径转换为文件列表用的是CFileFind类，客户端将文件列表显示用的是字符串分割函数、std::vector\<std::string\>数据结构等

**初始化：** 服务器监听端口，客户端发起连接。服务器成功accept后，根据clntAdr.sin_addr显示在线用户的IP地址，并向客户端发送默认目录的文件列表

**进入文件夹：** 客户端获取ListBox中选中的文件名，判断若为文件夹，则将该目录发送给服务器，服务器返回该目录转换的文件列表，客户端刷新显示

**返回上一级：** 在客户端每一次点击进入文件夹时，客户端的本地变量strdirpath就会保存该路径，在返回上一级时对其处理发送给服务器（若未点过进入文件夹，则不能返回上一级，即不能后退到默认路径以上），服务器也会多一层不能后退到默认路径以上的判断

## TODO：
- [ ] 上传、下载和删除文件功能
- [ ] 断开连接、停止监听功能
- [ ] 多用户连接
- [ ] ...

## 编调记录：
|编调错误提示|可能的原因|解决方法|批注|
|:---:|:---:|:---:|:---:|
|C2664 ‘int CWnd:: MessageBoxW (LPCTSTR, LPCTSTR, UNIT)’|字符集从MBCS改成Unicode后出现的错误，参数不能从const char * 转为LPCWSTR|更改字符集为多字节字符集|也可以字符串使用_T("")表示 char 换成TCHAR|

